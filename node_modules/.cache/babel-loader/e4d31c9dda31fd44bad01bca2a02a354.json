{"ast":null,"code":"import { connect } from \"react-redux\";\nimport orderBy from 'lodash/orderBy';\nimport { setPhone } from \"../../redux/phoneReducer\";\nimport { setFilter, setSearchQuery } from \"../../redux/filterReducer\";\nimport App from \"./App\";\nimport { addToCard, removeToCard } from \"../../redux/cardReducer\"; //фильтрация\n\nconst sortBy = (phoneReducer, filterBy) => {\n  switch (filterBy) {\n    case 'priceHigh':\n      return orderBy(phoneReducer, 'price', 'desc');\n\n    case 'priceLow':\n      return orderBy(phoneReducer, 'price', 'asc');\n\n    case 'model':\n      return orderBy(phoneReducer, 'model', 'desc');\n\n    default:\n      return phoneReducer;\n  }\n}; //Если сортировка прошла фильтруем товары\n\n\nconst filterPhones = (phones, searchQuery) => phones.filter(o => o.brand.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0 || o.model.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0); //Поиск товаров\n\n\nconst searchPhones = (phones, filterBy, searchQuery) => {\n  return sortBy(filterPhones(phones, searchQuery), filterBy);\n};\n\nconst mapStateToProps = state => ({\n  phones: state.phoneReducer.items && searchPhones(state.phoneReducer.items, state.filterReducer.filterBy, state.filterReducer.searchQuery),\n  isReady: state.phoneReducer.isReady\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setPhone: phones => dispatch(setPhone(phones)),\n  setFilter: filter => dispatch(setFilter(filter)),\n  setSearchQuery: value => dispatch(setSearchQuery(value)),\n  addToCard: obj => dispatch(addToCard(obj)),\n  removeToCard: id => dispatch(removeToCard(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/Users/Dima/WebstormProjects/MyNewProject/phones/Shop-master/src/components/App/AppContainer.js"],"names":["connect","orderBy","setPhone","setFilter","setSearchQuery","App","addToCard","removeToCard","sortBy","phoneReducer","filterBy","filterPhones","phones","searchQuery","filter","o","brand","toLowerCase","indexOf","model","searchPhones","mapStateToProps","state","items","filterReducer","isReady","mapDispatchToProps","dispatch","value","obj","id"],"mappings":"AACA,SAAQA,OAAR,QAAsB,aAAtB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,SAAQC,QAAR,QAAuB,0BAAvB;AACA,SAAQC,SAAR,EAAmBC,cAAnB,QAAwC,2BAAxC;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,SAAQC,SAAR,EAAmBC,YAAnB,QAAsC,yBAAtC,C,CAEA;;AACA,MAAMC,MAAM,GAAG,CAACC,YAAD,EAAeC,QAAf,KAA4B;AACvC,UAAQA,QAAR;AACI,SAAK,WAAL;AACI,aAAOT,OAAO,CAACQ,YAAD,EAAe,OAAf,EAAwB,MAAxB,CAAd;;AACJ,SAAK,UAAL;AACI,aAAOR,OAAO,CAACQ,YAAD,EAAe,OAAf,EAAwB,KAAxB,CAAd;;AACJ,SAAK,OAAL;AACI,aAAOR,OAAO,CAACQ,YAAD,EAAe,OAAf,EAAwB,MAAxB,CAAd;;AACJ;AACI,aAAOA,YAAP;AARR;AAUH,CAXD,C,CAYA;;;AACA,MAAME,YAAY,GAAG,CAACC,MAAD,EAASC,WAAT,KACjBD,MAAM,CAACE,MAAP,CACIC,CAAC,IACGA,CAAC,CAACC,KAAF,CAAQC,WAAR,GAAsBC,OAAtB,CAA8BL,WAAW,CAACI,WAAZ,EAA9B,KAA4D,CAA5D,IACAF,CAAC,CAACI,KAAF,CAAQF,WAAR,GAAsBC,OAAtB,CAA8BL,WAAW,CAACI,WAAZ,EAA9B,KAA4D,CAHpE,CADJ,C,CAMA;;;AACA,MAAMG,YAAY,GAAG,CAACR,MAAD,EAASF,QAAT,EAAmBG,WAAnB,KAAmC;AACpD,SAAOL,MAAM,CAACG,YAAY,CAACC,MAAD,EAASC,WAAT,CAAb,EAAoCH,QAApC,CAAb;AACH,CAFD;;AAIA,MAAMW,eAAe,GAAIC,KAAD,KAAU;AAC9BV,EAAAA,MAAM,EAAEU,KAAK,CAACb,YAAN,CAAmBc,KAAnB,IAA4BH,YAAY,CAC5CE,KAAK,CAACb,YAAN,CAAmBc,KADyB,EAClBD,KAAK,CAACE,aAAN,CAAoBd,QADF,EACYY,KAAK,CAACE,aAAN,CAAoBX,WADhC,CADlB;AAG9BY,EAAAA,OAAO,EAAEH,KAAK,CAACb,YAAN,CAAmBgB;AAHE,CAAV,CAAxB;;AAMA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACtCzB,EAAAA,QAAQ,EAAEU,MAAM,IAAIe,QAAQ,CAACzB,QAAQ,CAACU,MAAD,CAAT,CADU;AAEtCT,EAAAA,SAAS,EAAEW,MAAM,IAAIa,QAAQ,CAACxB,SAAS,CAACW,MAAD,CAAV,CAFS;AAGtCV,EAAAA,cAAc,EAAEwB,KAAK,IAAID,QAAQ,CAACvB,cAAc,CAACwB,KAAD,CAAf,CAHK;AAItCtB,EAAAA,SAAS,EAAEuB,GAAG,IAAIF,QAAQ,CAACrB,SAAS,CAACuB,GAAD,CAAV,CAJY;AAKtCtB,EAAAA,YAAY,EAAEuB,EAAE,IAAIH,QAAQ,CAACpB,YAAY,CAACuB,EAAD,CAAb;AALU,CAAf,CAA3B;;AAUA,eAAe9B,OAAO,CAACqB,eAAD,EAAkBK,kBAAlB,CAAP,CAA6CrB,GAA7C,CAAf","sourcesContent":["\r\nimport {connect} from \"react-redux\";\r\nimport orderBy from 'lodash/orderBy';\r\nimport {setPhone} from \"../../redux/phoneReducer\";\r\nimport {setFilter, setSearchQuery} from \"../../redux/filterReducer\";\r\nimport App from \"./App\";\r\nimport {addToCard, removeToCard} from \"../../redux/cardReducer\";\r\n\r\n//фильтрация\r\nconst sortBy = (phoneReducer, filterBy) => {\r\n    switch (filterBy) {\r\n        case 'priceHigh':\r\n            return orderBy(phoneReducer, 'price', 'desc');\r\n        case 'priceLow':\r\n            return orderBy(phoneReducer, 'price', 'asc');\r\n        case 'model':\r\n            return orderBy(phoneReducer, 'model', 'desc');\r\n        default:\r\n            return phoneReducer\r\n    }\r\n};\r\n//Если сортировка прошла фильтруем товары\r\nconst filterPhones = (phones, searchQuery) =>\r\n    phones.filter(\r\n        o =>\r\n            o.brand.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0 ||\r\n            o.model.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0,\r\n    );\r\n//Поиск товаров\r\nconst searchPhones = (phones, filterBy, searchQuery) => {\r\n    return sortBy(filterPhones(phones, searchQuery), filterBy)\r\n};\r\n\r\nconst mapStateToProps = (state)=>({\r\n    phones: state.phoneReducer.items && searchPhones(\r\n        state.phoneReducer.items, state.filterReducer.filterBy, state.filterReducer.searchQuery),\r\n    isReady: state.phoneReducer.isReady\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setPhone: phones => dispatch(setPhone(phones)),\r\n    setFilter: filter => dispatch(setFilter(filter)),\r\n    setSearchQuery: value => dispatch(setSearchQuery(value)),\r\n    addToCard: obj => dispatch(addToCard(obj)),\r\n    removeToCard: id => dispatch(removeToCard(id)),\r\n});\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}